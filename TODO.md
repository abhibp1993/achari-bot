# TODO: AchariBot - Telegram Bot for Recipe Management

## Features:

AchariBot is a Telegram bot. Users interact with AchariBot via commands `/command <params>`.

> Note: All user interaction will be through commands. Open-ended conversations are not reliable.

**Commands:**

* `/help`: List all available commands.
* `/what-to-cook`: Suggests a list of recipes considering time of day and user preferences.
  If plan for week was generated, suggest recipes from that plan first.
* `/recipe <name>`: Lists ingredients, procedure, calorie, special prep, prep & cook time required, and
  how many people it will serve.
* `/ingredients <name>`: Lists ingredients for given recipe.
* `/procedure <name>`: Lists procedure to cook given recipe.
* `/nutrition <name>`: Provides calorie estimate for given recipe.
* `/garnish <name>`: Provide ideas to garnish & serving tips for given recipe.
* `/video <name>`: Provide link to youtube recipe video for given recipe, if available.
* `/time-req <name>`: Provides time required to prep and cook given recipe.
* `/substitutions <recipe> <question>`: Responds to substitution questions
  for a recipe, such as "What can I use instead of X?" or "Can I use Y instead of X?".
* `/plan-my-week`: Interactively build a plan and grocery list for 7 lunch, 7 dinner, and khau.
  Account for existing grocery, guests, outside meals, and upwas (calendar interface will be needed).
* `/add-recipe <name>`: Interactively add a new recipe. Check for duplication.
* `/amend-recipe <name>`: Interactively amends an existing recipe.
* `/start-timer <name> <duration>`: Starts a timer with given duration.
* `/stop-timer <name>`: Stops a timer with given duration.
* `/get-timer <name>`: Returns total time, time elapsed and time remaining for given timer.

## TODO List:

## Requirements:

### /help

* Save help text (static) in `/resources/help.txt`.
* When `/help` command is executed, reply with text from the file.

### /start

* If it's first time user is interacting with the bot,
    * Create a new folder `/resources/user_preferences/<user_id>/` to store user preferences.
    * Interact with user to learn their preferences:
        * Ask about \<TODO>
        * Ask about \<TODO>
        * ...
    * Create a `/resources/user_preferences/<user_id>/preferences.json` file with default values.
* Otherwise, respond with a welcome message.

### /recipe \<name>

* Start an interactive session.
* Use similarity search to find the closest matching recipe name.
    * \<TODO: Enumerate detailed steps>
* Close interactive session when
    * a new command is issued, or
    * timeout occurs (e.g., 5 minutes of inactivity).

### /ingredients \<name>

* Invoke `/recipe <name>` command to determine which recipe user wants.
* Return only the ingredients for the given recipe.

### /procedure \<name>

* Invoke `/recipe <name>` command to determine which recipe user wants.
* Return only the procedure for the given recipe.

### /nutrition \<name>

* Invoke `/recipe <name>` command to determine which recipe user wants.
* Return only the nutrition value for the given recipe.
* If not, respond with nutrition value generated by LLM.
    * Update the recipe file with these ideas for future use.

### /garnish \<name>

* Invoke `/recipe <name>` command to determine which recipe user wants.
* If garnish ideas are stored in recipe, return those ideas.
* If not, respond with garnish ideas generated by LLM.
    * Update the recipe file with these ideas for future use.

### /video \<name>

* Invoke `/recipe <name>` command to determine which recipe user wants.
* Return only the video URL, if exists, for the given recipe.
    * If not, respond with a message saying "No video available for this recipe."

### /time_req \<name>

* Invoke `/recipe <name>` command to determine which recipe user wants.
* Return the prep-time, cook-time, total-time required for the given recipe.

### /what-to-cook

### /substitutions \<recipe> \<question>

### /plan-my-week

### /add-recipe \<name>

### /amend-recipe \<name>

### /start-timer \<name> \<duration>

* Starts a timer with the given duration.
* Requires a timer name and duration (e.g., "dal 20m").

### /stop-timer \<name>

* Stops a timer with the given name.
* Requires a timer name.

### /get-timer \<name>

* Returns total time, time elapsed, and time remaining for the given timer.
* Requires a timer name.